
<style>
    .product_container{
    display: none !important;
  }
    /* === Add Product Page === */
    /* .add-product-page {
            display: flex;
            justify-content: space-between;
            flex-direction: row;
            align-items: flex-start;
            width: 95%;
            margin: 20px auto;
            padding: 20px;
            border-radius: 20px;
            background-color: #9f9281;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        } */
.add-product-page {
    display: flex;
    gap: 2rem;
    padding: 2rem;
    border-radius: 1rem;
}

.leftside-of-add-product-page {
    flex: 1;
    padding: 2rem;
    background: #8c8174;
    border-radius: 1rem;
    color: #fff;
}

.leftside-of-add-product-page h1 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #000;
}

.leftside-of-add-product-page h2 {
    font-size: 1rem;
    margin-top: 1rem;
    color: green;
}

.form-css {
    flex: 2;
    padding: 2rem;
    background-color: #d0f0f7;
    border-radius: 1rem;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.form-css h1 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #222;
    text-align: center;
}

.form-section {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
}

.add-product-divs {
    flex: 1 1 45%;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.add-product-divs label {
    font-size: 0.9rem;
    font-weight: 500;
    color: #333;
}

.add-product-divs input,
.add-product-divs select {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
    border: 1px solid #ccc;
    border-radius: 0.5rem;
    background-color: #fff;
    transition: all 0.2s ease;
}

.add-product-divs input:focus,
.add-product-divs select:focus {
    border-color: #0d6efd;
    outline: none;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.2);
}

input[type="radio"] {
    margin-right: 0.4rem;
}

#warranty,
#discount {
    margin-top: 0.5rem;
}

#warranty input,
#discount input {
    margin-top: 0.25rem;
}

#warranty label,
#discount label {
    margin-top: 0.5rem;
}

#warranty,
#discount {
    display: none;
}

#AddProductBTN {
    margin-top: 1rem;
    padding: 0.6rem 1.4rem;
    font-size: 1rem;
    font-weight: 500;
    border: none;
    background-color: #ffb347;
    color: #000;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#AddProductBTN:hover {
    background-color: #ffa500;
}

        
    /* === Main Section === */
    .Main {
            display: flex;
            flex-direction: column;
            background-color: antiquewhite;
            padding: 20px;
        }
    
        
    /* === Vendor Products === */
    .vendor-Products {
            width: 95%;
            margin: 20px auto;
            padding: 20px;
            background-color: #c1ffe0;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    
        
    /* === Forms Holder === */
    .forms-holder {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            width: 60%;
        }
    
        
    /* === Form Base Style === */
    .form-css {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: auto;
            /* min-width: 220px;
            max-width: 300px; */
            padding: 20px;
            box-shadow: 2px 1px 2px 1px rgb(152, 152, 152);
            border-radius: 10px;
        }
    
        
    /* === Form Style 1 === */
    .form1 {
        width: auto;
        background-color: rgb(207, 239, 239);
    }
    
    .form-section {
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
        width: auto;
        background-color: rgb(207, 239, 239);
    }
    .add-form-section,div{
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;  
    }

        
    /* === Edit Form Section === */
    .edit-form {
    display: flex;
    flex-direction: row;
    justify-content: center; /* center in container */
    gap: 2rem;
    background-color: #f9f9f9;
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid #ddd;
    width: 100%; /* Allow to grow full width of container */
    max-width: 1200px; /* Prevent excessive stretch on large screens */
    box-sizing: border-box;
    margin: auto; /* Center horizontally */
}

.left-side-form,
.right-side-form {
    flex: 1; /* Share space equally */
    display: flex;
    height: auto;
    flex-direction: column;
    gap: 1rem;
    min-width: 250px;
}

.edit-form label {
    font-weight: 500;
    margin-bottom: 0.3rem;
}

.edit-form input,
.edit-form select,
.edit-form textarea {
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
    width: 100%;
}

.edit-form input[type="submit"] {
    background-color: #444;
    color: white;
    border: none;
    padding: 0.6rem;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
}

.edit-form input[type="submit"]:hover {
    background-color: #333;
}

    
    .warranty_field_css,
    
    /* === Discount Field Section === */
    .discount_field_css {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        background-color: #f0f0f0;
        padding: 1rem;
        border-radius: 4px;
    }
    
    
    
    
    label {
        padding: 5px 0;
    }

    #AddProductBTN {
        margin-top: 10px;
        padding: 8px 12px;
        background-color: antiquewhite;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    
        
    /* === Sidebar of Add Product Page === */
    .leftside-of-add-product-page {
            text-align: center;
            width: 20%;
        }
    
        
    /* === Discount Field Section === */
    .discount_field_css {
            display: flex;
            flex-direction: column;
            height: auto;
            align-items: center;
            width: 100%;
        }
    
        
    /* === Warranty Field Section === */
    .warranty_field_css {
            display: flex;
            flex-direction: column;
            height: auto;
            align-items: center;
            width: 100%;
        }
    
        .grid-products {
            display: grid;
            grid-template-columns: repeat(3, minmax(240px, 1fr));
            gap: 20px;
        }
    
        .product-card {
            padding: 15px;
            background-color: #fefefe;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
            height: auto;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
    
        .product-card img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 3px;
        }
    
        .product-card .title,
        .product-card .price {
            font-weight: bold;
            margin: 4px 0;
        }
    
        .inventory-button {
            background-color: antiquewhite;
            color: black;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
    
        .inventory-button:hover {
            background-color: #e2d1b8;
        }
    
        .button-holder{
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            min-height: 100px;
        }
    
        .img-title-holder{
            display: flex;
            width: 50%;
            flex-direction: column;
            justify-content: space-around;
            min-height: 100px;
        }
        .price-holder{
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 30%;
            min-width: 150px;
            padding: 0px 20px;
            min-height: 100px;
        }
        .price-holder p{
            font-size: 13px;
        }
    
    
        /* Modal */
        #OptionsModal,
        #EditProductModal,
        #DeleteProductModal,
        #AddImageModal,
        #InventoryModal,
        #EditInventoryModal,
        #ImageModal,
        #EditImageModal {
            flex-direction: row;
            justify-content: center;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: none;
        }
    
        .modal-dialog {
            padding: 20px;
        }
    
        .modal-content {
            display: flex;
            flex-direction: column;
            padding: 20px;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .modal-body div,section{
            align-content: center;
        }
    
        .modal-footer {
            display: flex;
            justify-content: center;
            width: 100%;
        }
        /* ################################### */
        .Options-dialog {
            
        }
        .Options-content {
            
        }
        .Options-button-holder {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }
        .Options-body {
            display: flex;
            justify-content: space-around;
            height: 300px;
        }
        .Options-footer {
            
        }
        /* ################################### */
        .edit {
            background-color: #007BFF;
            max-height: 300px;
        }
        .edit-product-dialog {
            background-color: #007BFF;
            max-height: 300px;
        }
        /* ################################### */
        .delete-product-dialog {
            
        }
        /* ################################### */
        .add-image-dialog {
            
        }
        /* ################################### */
        .edit-image-content {
          
            width: 1200px;
        }
        .edit-image-dialog {
            
        }
        /* ################################### */
        .add-inventory-dialog {
            
        }
        /* ################################### */
        .edit-inventory-dialog {
            
        }
    
    
    .btn {
        background-color: antiquewhite;
        padding: 8px 14px;
        border-radius: 5px;
        border: none;
    }
    
    .btn-primary {
        margin-top: 3%;
        background-color: antiquewhite;
    }
    
    .Inventory-form {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .discount-badge {
        position: absolute;
        top: 10px;
        left: -10px;
        background: crimson;
        color: white;
        font-weight: bold;
        padding: 5px 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        border-radius: 4px;
        font-size: 14px;
        z-index: 10;
    }
    .product-card {
        box-shadow: var(--BoxShadow);
        position: relative; /* Needed so the badge is positioned correctly */
    }
    
    .inventory-button{
        width: auto;
        height: 40px;
        font-size: 16px;
        cursor: pointer;
    }
    .edit-button{
        background-color: antiquewhite;
        width: auto;
        height: 30px;
        cursor: pointer;
        font-size: 12px;
    }
    .modal-button-holder{
        display: flex;
        flex-direction: column;
        justify-content: space-around;
    }
    
    
    .img-contrainter{
        width: auto;
        height: auto;
    }
    .img-contrainter-modal{
        display: flex;
        justify-content: space-around;
        width: 100%;
    }
    
    /* old thumbnail */
    /* .thumbnail-bar {
        width: 100%; 
        height: auto; 
        display: flex; 
        flex-direction: row;
        gap: 10px; 
        overflow-x: auto; 
        overflow-y: hidden; 
        padding-right: 10px;
        white-space: nowrap;
        align-content: center;
        scroll-behavior: smooth; 
    }
        
    .thumbnail, .placeholder-thumb {
        width: 60px; 
        height: auto;
        object-fit: cover;
        border: 2px solid transparent;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0px;
        display: flex;
        align-content: center;
    } */

    .thumbnail-bar {
        width: 100%;
        height: auto; 
        display: flex; 
        flex-direction: row;
        gap: 10px; 
        overflow-x: auto; 
        overflow-y: hidden; 
        padding-right: 10px;
        white-space: nowrap;
        align-content: center;
        scroll-behavior: smooth; 
    }
    .thumbnail-item{
        width: 45px; 
        height: auto;
        object-fit: cover;
        border: 2px solid transparent;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0px;
        display: flex;
        align-content: center;
    }

    .thumbnail, .placeholder-thumb {
        width: 60px; 
        height: auto;
        object-fit: cover;
        border: 2px solid transparent;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0px;
        display: flex;
        justify-content: space-around;
        align-content: center;
    }
        
    .placeholder-thumb:hover {
        /* transform: scale(1.05); */
        border-color: #007BFF;
    }
    
    .radio-group-horizontal {
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
    }
    
    .radio-option {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.3rem; /* spacing between input and label */
    }
    .add-product-divs{
        padding: 10px 10px;
    }
    
    </style>
    
    
     {% extends 'GuestHomepage.html'%}
     
     {% block body %}
     <section class="Main">
         <section class="add-product-page">
             <div class="leftside-of-add-product-page">
                <h1 style="font-size: 40px;">Vendor</h1><br>
                {% if success == True %}
                    <h2 style="color: green; margin: 0%;">{{ message }}</h2>
                {% elif success == False %}
                    <h2 style="color: red; margin: 0%;">{{ message }}</h2>
                <!-- {% elif successinv == True%}
                    <h2 style="color: green; margin: 0%;">{{ messageinv }}</h2>
                {% elif successinv == False%}
                    <h2 style="color: green; margin: 0%;">{{ messageinv }}</h2> -->
                {% endif %}
             </div>
             
             <!-- Add Product section -->
             <form class="form-css form1" method="POST" action="{{ url_for('vendor_bp.VendorAddProduct') }}">
                <h1 class="modal-title">Add Product</h1>
                <section class="form-section">
                    <div class="add-product-divs">
                        <div>
                            <label for="URL">Main Image URL:</label>
                            <input type="url" name="URL" placeholder="IMG" required>
                        </div>

                        <div>
                            <label for="title">Product Title:</label>
                            <input type="text" name="title" placeholder="Title" required>
                        </div>
                        
                        <div>
                            <label for="price">Price:</label>
                            <input type="number" name="price" step="0.01" placeholder="Price" required>
                        </div>
                    
                        <div>
                            <label for="description">Description:</label>
                            <input type="text" name="description" placeholder="Description" required>
                        </div>
                        <fieldset style="display: flex; flex-direction: column; border-radius: 6px; text-align: center;">
                            <legend>INVENTORY</legend>
                            <label for="Color">Color:</label>
                            <input type="text" id="Color" name="Color" placeholder="Enter Color" required>
            
                            <label for="Amount">Amount:</label>
                            <input type="number" id="Amount" name="Amount" placeholder="Enter Amount" required>
                        </fieldset>
                        
                    </div>
                    <div class="add-product-divs">
                        <div>
                        <label>Do you want to add a Warranty?</label>
                            <div style="display: flex; flex-direction: row;">
                                <input type="radio" name="add_warranty" value="yes" onclick="toggleWarrantyFields(this, true)" required>
                                <label>Yes</label>
                                <input type="radio" name="add_warranty" value="no" onclick="toggleWarrantyFields(this, false)">
                                <label>No</label>
                            </div>
                        </div>
                    
                        <div class="warranty_field_css" style="display: none;">
                            <label>Warranty:</label>
                            <input type="date" name="warranty">
                        </div>

                        <div>
                            <label>Do you want to add a discount?</label>
                            <div style="display: flex; flex-direction: row;">
                                <input type="radio" name="add_discount" value="yes" onclick="toggleDiscountFields(this, true)" required>
                                <label>Yes</label>
                                <input type="radio" name="add_discount" value="no" onclick="toggleDiscountFields(this, false)">
                                <label>No</label>
                            </div>
                        </div>

                        <div class="discount_field_css" style="display: none;">
                            <label>Discount (%):</label>
                            <input type="number" name="discount" placeholder="Discount">
                            <label>Discount End Date:</label>
                            <input type="date" name="discount_date">
                        </div>
                        
                    </div>
                    <div class="add-product-divs">
                        <div>
                            <label for="category">Category:</label>
                            <select name="category" required>
                                <option value="" disabled selected>Select category</option>
                                <option value="Cell Phones">Cell Phones</option>
                                <option value="Computers & Accessories">Computers & Accessories</option>
                                <option value="Televisions">Televisions</option>
                                <option value="Headphones">Headphones</option>
                                <option value="Photography & Videography">Photography & Videography</option>
                                <option value="Wearable Tech">Wearable Tech</option>
                            </select>
                        </div>
                        <div>
                            <label for="availability">Availability:</label>
                            <select name="availability" required>
                                <option value="" disabled selected>Select availability</option>
                                <option value="IN STOCK">IN STOCK</option>
                                <option value="OUT OF STOCK">OUT OF STOCK</option>
                            </select>
                        </div>
                        <input id="AddProductBTN" type="submit" value="Add Product to Acadia">
                        </div>
                </section>
            </form>
        </section>
        
         <section class="vendor-Products"> 
            <h1>Your Products</h1>
            <div class="grid-products">
                {% for Product in AllProducts %}
                <div class="product-card">
                    <div class="img-title-holder">
                        <!-- Main Product Image -->
                        <div class="img-contrainter" style="margin-bottom: 10px;">
                            <img src="{{ Product['image_url'] }}" alt="Main Product Image" id="main-image-{{ Product['product_id'] }}">
                        </div>
                        
                        <!-- Thumbnail Bar -->
                        <div class="thumbnail-bar">
                            <!-- Main Thumbnail Image -->
                            <div class="thumbnail placeholder-thumb">
                                <div class="thumbnail-item">
                                    <img src="{{ Product['image_url'] or 'https://via.placeholder.com/200' }}" alt="Main Product Image" class="img-holder"
                                         onclick="changeImage('{{ Product['image_url'] }}', '{{ Product['product_id'] }}')">
                                </div>
                            </div>
                            
                            <!-- Additional Thumbnails -->
                            {% for img, img_id in Product['additional_images'] %}
                            <div class="thumbnail placeholder-thumb">
                                <div class="thumbnail-item">
                                    <img src="{{ img }}" alt="Thumbnail" class="thumbnail" 
                                         onclick="changeImage('{{ img }}', '{{ Product['product_id'] }}')">
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        
                        <!-- Product Title -->
                        <div class="title">
                            <h3>{{ Product['title'] }}</h3>
                        </div>
                    </div>
                    <div class="price-holder">
                        {% if (Product.discount_date and Product.discount_date > CurDate) and Product.discount %}
                            <div>
                                <div class="price"><p>Original Price: ${{ '%0.2f' | format(Product.price | float) }}</p></div>
                                <div class="price"><p style="color: rgb(255, 0, 0);">Amount dropped: -${{ '%0.2f' | format(Product.saving_discount | float) }}</p></div>
                                <div class="price"><p style="color: green;">Discounted Price: ${{ '%0.2f' | format(Product.discounted_price | float) }}</p></div>
                            </div>
                        {% elif Product.discount_date and Product.discount_date < CurDate %}
                            <div>
                                <div class="price"><p>Original Price: ${{ '%0.2f' | format(Product.price | float) }}</p></div>
                                <div class="price"><p style="color: orange;">Discount expired!</p></div>
                            </div>
                        {% else %}
                            <div>
                                <div class="price"><p>Original Price: ${{ '%0.2f' | format(Product.price | float) }}</p></div>
                                <div class="price"><p>No discount added</p></div>
                            </div>
                        {% endif %}
                        <div class="button-holder">
                            <button onclick="OpenEditProductModal('{{ Product['product_id'] }}')" class="edit-button">Edit Control</button>  
                            <button onclick="OpenModal('{{ Product['product_id'] }}')" class="edit-button">Product Control</button>                               
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    
         
    <!-- ##################################################### -->
    <!-- ###                                               ### -->
    <!-- ###                     MODALS                    ### -->
    <!-- ###                                               ### -->
    <!-- ##################################################### -->
    
    <!-- Options Modal Structure -->
    <div id="OptionsModal" class="modal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title" id="accountModalLabel">Product Options</h1>
                    <p>Pid: <span id="modal-PID"></span></p>
                    <p style="margin: 0; color: rgb(136, 136, 136);">fill in what your product needs</p>
                </div>
                <div class="modal-body Options-body">
                    <div class="modal-button-holder Options-button-holder">
                        <button class="inventory-button" onclick="OpenDeleteModal()">Delete Product</button>
                        <button class="inventory-button" onclick="OpenImageModal()">Add Images</button>
                        <button class="inventory-button" onclick="OpenEditImageModal()">Edit Images</button>
                        <!-- <button class="inventory-button" onclick="OpenInventoryModal()">Add Inventory Item</button> -->
                        <button class="inventory-button" onclick="OpenEditInvetoryModal()">Edit Inventory Item</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="CloseModal()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Product Modal -->
    <div id="EditProductModal" class="modal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">  
                    <h1 class="modal-title">Edit Product</h1>
                    <p>Pid: <span id="edit-modal-PID"></span></p>
                    <p style="margin: 0; color: rgb(136, 136, 136);">Fill in what your product needs</p>
                </div>
                <div class="modal-body">
                    {% for product in AllProducts %}
                    <form class="form-css edit-form product-edit-form" id="form-{{ product['product_id'] }}" data-pid="{{ product['product_id'] }}" method="POST" action="{{ url_for('vendor_bp.VendorEditProduct') }}" style="display: none;">
                        <div class="left-side-form">
                            <input type="hidden" name="PID" value="{{ product['product_id'] }}">
                            
                            <div>
                                <label>Main Image URL:</label>
                                <input type="url" name="URL" value="{{ product['image_url'] }}" required>
                            </div>

                            <div>
                                <label>Product Title:</label>
                                <input type="text" name="title" value="{{ product['title'] }}" required>
                            </div>

                            <div>
                                <label>Price:</label>
                                <input type="number" name="price" step="0.01" value="{{ product['price'] }}" required>
                            </div>

                            <div>
                                <label>Description:</label>
                                <input type="text" name="description" value="{{ product['description'] }}" required>
                            </div>
                        </div>
                        <div class="right-side-form">
                            <div>
                                <label>Do you want to add a Warranty?</label>
                                <div class="radio-group-horizontal">
                                    <div class="radio-option">
                                        <input type="radio" name="add_warranty" value="yes" onclick="toggleWarrantyFields(this, true)" {% if product['warranty'] %}checked{% endif %}>
                                        <label>Yes</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" name="add_warranty" value="no" onclick="toggleWarrantyFields(this, false)" {% if not product['warranty'] %}checked{% endif %}>
                                        <label>No</label>
                                    </div>
                                </div>
            
                                <div class="warranty_field_css" style="display: {{ 'flex' if product['warranty'] else 'none' }};">
                                    <label>Warranty:</label>
                                    <input type="date" name="warranty" value="{{ product['warranty'] }}">
                                </div>
                            </div>
                        <div>
                            <label>Do you want to add a discount?</label>
                            <div class="radio-group-horizontal">
                                <div class="radio-option">
                                    <input type="radio" name="add_discount" value="yes" onclick="toggleDiscountFields(this, true)" {% if product['discount'] %}checked{% endif %}>
                                    <label>Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="add_discount" value="no" onclick="toggleDiscountFields(this, false)" {% if not product['discount'] %}checked{% endif %}>
                                    <label>No</label>
                                </div>
                            </div>
                            
                            
                            <div class="discount_field_css" style="display: {{ 'flex' if product['discount'] else 'none' }};">
                                <label>Discount (%):</label>
                                <input type="number" name="discount" value="{{ product['discount'] | float * 100 if product['discount'] else '' }}">
                                <label>Discount End Date:</label>
                                <input type="date" name="discount_date" value="{{ product['discount_date'] }}">
                            </div>
                        </div></div>
                        <div class="right-side-form">
                            <div>
                                <label for="category">Category:</label>
                                <select name="category" required>
                                    <option value="" disabled selected>Select category</option>
                                    <option value="Cell Phones" {% if product['category'] == "Cell Phones" %}selected{% endif %}>Cell Phones</option>
                                    <option value="Computers & Accessories" {% if product['category'] == "Computers & Accessories" %}selected{% endif %}>Computers & Accessories</option>
                                    <option value="Televisions" {% if product['category'] == "Televisions" %}selected{% endif %}>Televisions</option>
                                    <option value="Headphones" {% if product['category'] == "Headphones" %}selected{% endif %}>Headphones</option>
                                    <option value="Photography & Videography" {% if product['category'] == "Photography & Videography" %}selected{% endif %}>Photography & Videography</option>
                                    <option value="Wearable Tech" {% if product['category'] == "Wearable Tech" %}selected{% endif %}>Wearable Tech</option>
                                </select>
                            </div>
                        <div>
                            <label for="availability">Availability:</label><br>
                            <select name="availability" required>
                                <option value="IN STOCK" {% if product['availability'] == "IN STOCK" %}selected{% endif %}>IN STOCK</option>
                                <option value="OUT OF STOCK" {% if product['availability'] == "OUT OF STOCK" %}selected{% endif %}>OUT OF STOCK</option>
                            </select>
                        </div>

                        <div>
                            <input type="hidden" name="VID" value="{{ product['VID'] }}" required>
                        </div>
                        <input type="submit" value="Update Product">
                    </div>
                    
                    </form>    
                    {% endfor %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="CloseEditProductModal()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    
    
    <!-- Delete Product Modal Structure -->
    <div id="DeleteProductModal" class="modal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title" id="accountModalLabel">Delete Product</h1>
                    <p style="margin: 0; color: rgb(136, 136, 136);">fill in what your product needs</p>
                </div>
                <div class="modal-body">
                    <!-- Form for Deleting product -->
                    <form class="Inventory-form"  action="{{ url_for('vendor_bp.VendorDeleteProduct') }}" method="POST">
                        <input type="hidden" id="del-modal-PID-input" name="PID">
                        <!-- <input type="hidden" id="del-modal-VID-input" name="VID"> -->
                        <label for="PID">Product ID: <span id="del-modal-PID"></span></label>
                        
                        <button type="submit" class="btn btn-primary">Delete Product</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="CloseDeleteModal()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
<!-- Add Image Modal Structure -->
<div id="AddImageModal" class="modal" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title">Add Product Images</h1>
                <p style="margin: 0; color: rgb(136, 136, 136);">Upload additional images</p>
            </div>
            <div class="modal-body">
                <form class="Inventory-form" method="POST" action="{{ url_for('vendor_bp.AddImages') }}" enctype="multipart/form-data">
                    <label>Product ID: <span id="img-modal-PID"></span></label>
                    <input type="hidden" id="img-modal-PID-input" name="PID">
                    <label for="image_url">Enter Image URL:</label>
                    <input type="url" id="image_url" name="image_url" placeholder="https://example.com/image.jpg" required>
                    <button type="submit" class="btn btn-primary">Upload Image</button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="CloseImageModal()">Close</button>
            </div>
        </div>
    </div>
</div>

    
    
    <!-- Edit Image Modal Structure -->
<div id="EditImageModal" class="modal" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content edit-image-content">
            <div class="modal-header">
                <h1 class="modal-title">Edit Product Images</h1>
                <p style="margin: 0; color: rgb(136, 136, 136);">Upload additional images</p>
            </div>
            <div class="modal-body">
                <form class="Inventory-form" method="POST" action="{{ url_for('vendor_bp.VendorEditProductImages') }}" enctype="multipart/form-data">
                    <!-- Hidden fields dynamically set via JS -->
                    <input type="hidden" id="edit-image-pid" name="PID"> <!-- Ensure correct name for PID -->
                    <input type="hidden" id="edit-image-id" name="image_ids"> <!-- Hidden field for img_id -->

                    <label for="image_url">Product ID: <span id="edit-img-modal-PID-input"></span></label>
                    <label for="pi-img-id">Image ID: <span id="pi-img-id"></span></label>

                    {% for product in AllProducts %}
                        <div class="product-images-group" data-pid="{{ product['product_id'] }}" style="display: none;">
                            {% if product['additional_images'] %}
                                <!-- Modal Image Section -->
                                <div class="img-contrainter-modal" style="margin-bottom: 10px;">
                                    <img src="{{ product['image_url'] }}" style="margin-bottom: 10px; width: 300px; height: auto;" alt="Main product Image" id="main-modal-image-{{ product['product_id'] }}">
                                </div>
                                <!-- Thumbnail Section -->
                                <div class="thumbnail-bar">
                                    <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                                        <div class="thumbnail-item" style="width:auto;">
                                            <img src="{{ product['image_url'] or 'https://via.placeholder.com/200' }}" alt="Main product Image" class="thumbnail"
                                                onclick="changeModalImage('{{ product['image_url'] }}', '{{ product['product_id'] }}', 'main')">
                                        </div>
                                    </div>
                                    {% for img, img_id in product['additional_images'] %}
                                        <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                                            <div class="thumbnail-item" style="width:auto;">
                                                <img src="{{ img }}" alt="Thumbnail" class="thumbnail"
                                                    onclick="changeModalImage('{{ img }}', '{{ product['product_id'] }}', '{{ img_id }}')">
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <p>No additional images.</p>
                            {% endif %}
                        </div>
                    {% endfor %}

                    <label for="image_url">Enter Image URL:</label>
                    <input type="url" id="edit-image-url" name="image_url" placeholder="https://example.com/image.jpg">
                    <button type="submit" class="btn btn-primary">Update Image</button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="CloseEditImageModal()">Close</button>
            </div>
        </div>
    </div>
</div>


    
    <!-- Add Inventory Modal Structure -->
    <div id="InventoryModal" class="modal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content edit-image-content">
                <div class="modal-header">
                    <h1 class="modal-title">Add Inventory Item</h1>
                    <p style="margin: 0; color: rgb(136, 136, 136);">Add Inventory to Product</p>
                </div>
                <div class="modal-body">
                    <!-- Form for adding product images -->
                    <form class="Inventory-form" method="POST" action="" enctype="multipart/form-data">
                        
                        <!-- Hidden fields dynamically set via JS -->
                        <input type="hidden" id="edit-image-pid" name="PID">
                        <input type="hidden" id="edit-image-id" name="image_ids">
                        <input type="hidden" id="edit-image-url" name="image_url">
                        
        
                        <label for="image_url">Product ID: <span id="add-inv-modal-PID-input"></span></label>
                        <label for="pi-img-id-inv">Image ID: <span id="pi-img-id-inv"></span></label>
        
                        {% for product in AllProducts %}
                            <div class="product-images-group-inv" data-pid="{{ product['product_id'] }}" style="display: none;">
                                    <!-- Modal Image Section -->
                                    <div class="img-contrainter-modal" style="margin-bottom: 10px;">
                                        <img src="{{ product['image_url'] }}" style="margin-bottom: 10px; width: 300px; height: auto;" alt="Main product Image" id="main-modal-image-inv-{{ product['product_id'] }}">
                                    </div>
                                    <!-- Thumbnail Section -->
                                    <div class="thumbnail-bar">
                                        <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                                            <div class="thumbnail-item" style="width:auto;">
                                                <img src="{{ product['image_url'] or 'https://via.placeholder.com/200' }}" alt="Main product Image" class="thumbnail"
                                                    onclick="changeModalImageInv('{{ product['image_url'] }}', '{{ product['product_id'] }}', 'main')">
                                            </div>
                                        </div>
                                        {% for img, img_id in product['additional_images'] %}
                                            <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                                                <div class="thumbnail-item" style="width:auto;">
                                                    <img src="{{ img }}" alt="Thumbnail" class="thumbnail"
                                                    onclick="changeModalImageInv('{{ img }}', '{{ product['product_id'] }}', '{{ img_id }}')">
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                            </div>
                        {% endfor %}
                        <label for="Color">Color:</label>
                        <input type="text" id="Color" name="Color" placeholder="Enter Color" required>
        
                        <label for="Amount">Amount:</label>
                        <input type="number" id="Amount" name="Amount" placeholder="Enter Amount" required>
                        
                        <button type="submit" class="btn btn-primary">add inventory to product</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="CloseInventoryModal()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    
<!-- Edit Inventory Modal -->
<div id="EditInventoryModal" class="modal" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content edit-image-content">
        <div class="modal-header">
          <h1 class="modal-title">Edit Inventory for Item</h1>
          <p style="margin: 0; color: rgb(136, 136, 136);">Edit Inventory for Product</p>
        </div>
        <div class="modal-body">
          <form class="Inventory-form" method="POST" action="{{ url_for('vendor_bp.editInventory') }}" enctype="multipart/form-data">
            <input type="hidden" id="edit-inventory-pid" name="PID">
            <input type="hidden" id="edit-inventory-image-id" name="image_ids">
            <input type="hidden" id="edit-inventory-image-url" name="image_url">
  
            <label>Product ID: <span id="edit-inv-modal-PID-input"></span></label>
            <label>Image ID: <span id="pi-img-id-edit-inv"></span></label>
  
            <div>
              <label for="Color">Color:</label>
              <input type="text" id="Color" name="Color" placeholder="Enter Color" required>
            </div>
  
            <div>
              <label for="Amount">Amount:</label>
              <input type="number" id="Amount" name="Amount" placeholder="Enter Amount" required>
            </div>
  
            {% for product in AllProducts %}
              <div class="product-images-group-edit-inv" data-pid="{{ product['product_id'] }}" style="display: none;">
                <div class="img-contrainter-modal" style="margin-bottom: 10px;">
                  <img src="{{ product['image_url'] }}" style="margin-bottom: 10px; width: 300px; height: auto;" alt="Main product Image" id="main-modal-image-edit-inv-{{ product['product_id'] }}">
                </div>
  
                <div class="thumbnail-bar">
                  {% set main_inv = product['main_inventory'][0] if product['main_inventory'] else {} %}
                  <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                    <div class="thumbnail-item" style="width:auto;">
                      <img src="{{ product['image_url'] or 'https://via.placeholder.com/200' }}" alt="Main product Image" class="thumbnail"
                           onclick="changeModalImageEditInv('{{ product['image_url'] }}', '{{ product['product_id'] }}', 'main', '{{ main_inv.color or '' }}', '{{ main_inv.amount or 0 }}')">
                    </div>
                  </div>
  
                  {% for img, img_id in product['additional_images'] %}
                    {% set inventory = product['inventory_map'].get(img_id, {}) %}
                    <div class="thumbnail placeholder-thumb" style="justify-content: center;">
                      <div class="thumbnail-item">
                        <img src="{{ img }}" alt="Thumbnail" class="thumbnail"
                             onclick="changeModalImageEditInv('{{ img }}', '{{ product['product_id'] }}', '{{ img_id }}', '{{ inventory.color or '' }}', '{{ inventory.amount or 0 }}')">
                      </div>
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
  
            <button type="submit" class="btn btn-primary">Update Inventory</button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="CloseEditInventoryModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
  
    
    
    
     </section>
     
     <script>
        // ─── Utility Form Field Toggles ──────────────────────────────
        function toggleDiscountFields(el, show) {
            const form = el.closest("form");
            const discountFields = form.querySelector('.discount_field_css');
            if (discountFields) {
                discountFields.style.display = show ? 'flex' : 'none';
                const discountInput = form.querySelector('input[name="discount"]');
                if (discountInput) discountInput.required = show;
            }
        }
    
        function toggleWarrantyFields(el, show) {
            const form = el.closest("form");
            const warrantyFields = form.querySelector('.warranty_field_css');
            if (warrantyFields) {
                warrantyFields.style.display = show ? 'flex' : 'none';
                const warrantyInput = form.querySelector('input[name="warranty"]');
                if (warrantyInput) warrantyInput.required = show;
            }
        }
    
        let currentPID = null;
    
        // ─── Options Modal ───────────────────────────────────────────
        function OpenModal(PID) {
            currentPID = PID;
            const modal = document.querySelector("#OptionsModal");
            modal.style.display = "flex";
            const pidSpan = document.getElementById("modal-PID");
            if (pidSpan) pidSpan.textContent = currentPID;
        }
    
        function CloseModal() {
            document.querySelector("#OptionsModal").style.display = "none";
        }
    
        // ─── Edit Product Modal ──────────────────────────────────────
        function OpenEditProductModal(PID) {
            const modal = document.querySelector("#EditProductModal");
            modal.style.display = "flex";
            document.getElementById("edit-modal-PID").textContent = PID;
            document.querySelectorAll(".product-edit-form").forEach(form => form.style.display = "none");
            const targetForm = document.getElementById("form-" + PID);
            if (targetForm) targetForm.style.display = "flex";
        }
    
        function CloseEditProductModal() {
            document.querySelector("#EditProductModal").style.display = "none";
        }
    
        // ─── Delete Product Modal ────────────────────────────────────
        function OpenDeleteModal(PID) {
            currentPID = PID || currentPID;
            const modal = document.querySelector("#DeleteProductModal");
            if (!modal) return console.error("DeleteProductModal element not found!");
            modal.setAttribute("data-pid", currentPID);
            document.getElementById("del-modal-PID").textContent = currentPID;
            document.getElementById("del-modal-PID-input").value = currentPID;
            modal.style.display = "flex";
        }
    
        function CloseDeleteModal() {
            document.querySelector("#DeleteProductModal").style.display = "none";
        }
    
        // ─── Add Image Modal ─────────────────────────────────────────
        // Function to open the image modal and set the product ID
        function OpenImageModal(PID) {

            currentPID = PID || currentPID;
            const modal = document.querySelector("#AddImageModal");
            modal.setAttribute("data-pid", currentPID);
            document.getElementById("img-modal-PID").textContent = currentPID;
            document.getElementById("img-modal-PID-input").value = currentPID;

            modal.style.display = "flex";
        }


    
        function CloseImageModal() {
            document.getElementById("AddImageModal").style.display = "none";
        }
    
        // ─── Edit Image Modal ────────────────────────────────────────
        function OpenEditImageModal(PID) {
            currentPID = PID || currentPID;
            const modal = document.querySelector("#EditImageModal");
            modal.setAttribute("data-pid", currentPID);
            document.getElementById("edit-img-modal-PID-input").textContent = currentPID;
            document.getElementById("edit-image-pid").value = currentPID;
            document.querySelectorAll('.product-images-group').forEach(g => g.style.display = 'none');
            const selectedGroup = document.querySelector(`.product-images-group[data-pid="${currentPID}"]`);
            if (selectedGroup) selectedGroup.style.display = 'block';
            modal.style.display = "flex";
        }
    
        function CloseEditImageModal() {
            document.getElementById("EditImageModal").style.display = "none";
        }
    
        // ─── Inventory Modal ─────────────────────────────────────────
        function OpenInventoryModal(PID) {
            currentPID = PID || currentPID;
            const modal = document.querySelector("#InventoryModal");
            modal.setAttribute("data-pid", currentPID);
            document.getElementById("add-inv-modal-PID-input").textContent = currentPID;
            document.querySelectorAll('.product-images-group-inv').forEach(g => g.style.display = 'none');
            const selectedGroup = document.querySelector(`.product-images-group-inv[data-pid="${currentPID}"]`);
            if (selectedGroup) selectedGroup.style.display = 'block';
            modal.style.display = "flex";
        }
    
        function CloseInventoryModal() {
            document.getElementById("InventoryModal").style.display = "none";
        }
    
        // ─── Edit Inventory Modal ────────────────────────────────────
        function OpenEditInvetoryModal(PID) {
            currentPID = PID || currentPID;
            const modal = document.querySelector("#EditInventoryModal");
            modal.setAttribute("data-pid", currentPID);
            // #!------------------------------ Erick's Change--------------------
            document.getElementById("edit-inventory-pid").value = currentPID
            document.getElementById("edit-inventory-image-id").value = 'main';  

            document.getElementById("edit-inv-modal-PID-input").textContent = currentPID;
            document.getElementById("pi-img-id-edit-inv").textContent = 'main'; 
            // #! -----------------------------
            document.querySelectorAll('.product-images-group-edit-inv').forEach(g => g.style.display = 'none');
            const selectedGroup = document.querySelector(`.product-images-group-edit-inv[data-pid="${currentPID}"]`);
            if (selectedGroup) selectedGroup.style.display = 'block';
            modal.style.display = "flex";
        }
    
        function CloseEditInventoryModal() {
            const modal = document.querySelector("#EditInventoryModal");
            modal.style.display = "none";
    
            document.getElementById("edit-inventory-pid").value = "";
            document.getElementById("edit-inventory-image-id").value = "";
            document.getElementById("edit-inventory-image-url").value = "";
            document.getElementById("pi-img-id-edit-inv").textContent = "";
            document.getElementById("edit-inv-modal-PID-input").textContent = "";
    
            const colorInput = document.querySelector('#EditInventoryModal input[name="Color"]');
            const amountInput = document.querySelector('#EditInventoryModal input[name="Amount"]');
            if (colorInput) colorInput.value = "";
            if (amountInput) amountInput.value = "";
        }
    
        // ─── Image Change Functions ──────────────────────────────────
        function changeImage(imageUrl, productId) {
            const targets = [
                `main-image-${productId}`,
                `main-image-inv-${productId}`,
                `main-image-edit-inv-${productId}`
            ];
            targets.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.src = imageUrl;
            });
        }
    
        // Function to handle changing the main image and setting the hidden fields
        function changeModalImage(imageUrl, productId, imgId) {
            // Update the main image displayed in the modal
            var mainImage = document.getElementById('main-modal-image-' + productId);
            if (mainImage) {
                mainImage.src = imageUrl; // Change the main image source to the selected image
            }

            // Set the image URL input to the selected image
            var imageUrlInput = document.getElementById('edit-image-url');
            if (imageUrlInput) {
                imageUrlInput.value = imageUrl; // Update the URL input with the new image URL
            }

            // Set the hidden fields for PID (Product ID) and img_id (Image ID)
            var pidInput = document.getElementById('edit-image-pid');
            if (pidInput) {
                pidInput.value = productId; // Set the Product ID hidden field
            }

            var imgIdInput = document.getElementById('edit-image-id');
            if (imgIdInput) {
                imgIdInput.value = imgId; // Set the Image ID hidden field
            }

            // Update the displayed Product ID and Image ID in the modal
            var pidText = document.getElementById('edit-img-modal-PID-input');
            if (pidText) {
                pidText.textContent = productId; // Show the Product ID in the modal
            }

            var imgIdText = document.getElementById('pi-img-id');
            if (imgIdText) {
                imgIdText.textContent = imgId; // Show the Image ID in the modal
            }
        }

    
        function changeModalImageInv(imageUrl, productId, imageId) {
            const mainImg = document.getElementById(`main-modal-image-inv-${productId}`);
            if (mainImg) mainImg.src = imageUrl;
    
            document.getElementById('edit-image-pid').value = productId;
            document.getElementById('edit-image-id').value = imageId;
            document.getElementById('edit-image-url').value = imageUrl;
    
            document.getElementById('add-inv-modal-PID-input').textContent = productId;
            document.getElementById('pi-img-id-inv').textContent = imageId;
        }
    
        function changeModalImageEditInv(imageUrl, productId, imageId, color = '', amount = 0) {
            const mainImg = document.getElementById(`main-modal-image-edit-inv-${productId}`);
            if (mainImg) mainImg.src = imageUrl;

            const validImageId = imageId || 'main';
            
            document.getElementById('edit-inventory-pid').value = productId;
            document.getElementById('edit-inventory-image-id').value = imageId;
            document.getElementById('edit-inventory-image-url').value = imageUrl;
    
            document.getElementById('edit-inv-modal-PID-input').textContent = productId;
            document.getElementById('pi-img-id-edit-inv').textContent = imageId;
    
            const colorInput = document.querySelector('#EditInventoryModal input[name="Color"]');
            const amountInput = document.querySelector('#EditInventoryModal input[name="Amount"]');
            if (colorInput) colorInput.value = color;
            if (amountInput) amountInput.value = amount;
        }
    </script>
    
     {% endblock body%}

